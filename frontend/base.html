<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>contributeto.tech</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
          integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.12.0/bootstrap-social.min.css"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          crossorigin="anonymous">
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.5/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-resource/1.7.5/angular-resource.min.js"></script>
</head>
<body>
<div ng-app="contributetotechapp">
    {% block body %}{% endblock %}
</div>
<script>
    var app = angular.module('contributetotechapp', ['ngResource']);

    app.factory('MeFactory', function ($resource) {
        return $resource('/api/me');
    });

    app.controller('MeController', function MeController($scope, MeFactory) {
        MeFactory.get(function (data) {
            $scope.data = JSON.stringify(data);
        });
    });

    app.factory('recommendationDictFactory', function ($resource) {
        return $resource('/api/recommendations');
    });

    app.controller('recommendationDictController', function recommendationDictController($scope, recommendationDictFactory) {
        $scope.recommendations = [{}, {}, {}];
        recommendationDictFactory.query(function (data) {
            $scope.userProjects = data.map(function(tuple) { return tuple[0] });
            $scope.recommendations = data.map(function(tuple) { return [tuple[1], tuple[2], tuple[3]] });
        });
    });

    app.factory('detailsDictFactory', function ($resource) {
        return $resource('/api/details');
    });

    app.controller('detailsDictController', function detailsDictController($scope, detailsDictFactory) {
        detailsDictFactory.query(function (data) {
            $scope.details = data
            console.log($scope.details);
        });
    });
</script>
</body>
</html>